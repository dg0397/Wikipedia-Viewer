(this["webpackJsonpwikipedia-viewer"]=this["webpackJsonpwikipedia-viewer"]||[]).push([[3],{30:function(e,t,n){},31:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var a=n(0),r=n.n(a),c=n(2),l=n(9);function i(e,t,n){var a=n.keyword,r=n.page,c=void 0===r?0:r,i=n.limit,o=void 0===i?15:i;t(!0),fetch("".concat(l.c).concat(l.a,"&gsrlimit=").concat(o,"&gsroffset=").concat(c*o,"&gsrsearch=").concat(a)).then((function(e){return e.json()})).then((function(n){var a=n.query.pages;console.log(Object.values(a));var r=Object.values(a).map((function(e){var t=e.pageid,n=e.title,a=e.thumbnail,r=e.extract;return{pageid:t,title:n,thumbnailSource:(a||"").source,extract:r}}));console.log("Fetching"),e(0===c?r:function(e){return e.concat(r)}),t(!1)}))}var o=n(6);n(30);var u=n(3);var s=r.a.memo((function(e){var t=e.title,n=e.extract,a=e.pageid;return r.a.createElement("div",{className:"Article"},r.a.createElement("h1",null,t),r.a.createElement("p",null,n),r.a.createElement(u.a,{to:"/article/".concat(a)},"See the Article"))}));n(31);function f(e){var t=e.articles;return r.a.createElement("div",{className:"ArticleList"},t.map((function(e){var t=e.title,n=e.extract,a=e.pageid,c=n.slice(0,n.indexOf(".")+1);return r.a.createElement(s,{title:t,extract:c,pageid:a,key:a})})))}var m=n(10),d=n(11);var g=n(4);function v(e){var t=e.params.keyword,l=function(e){var t=e.keyword,n=Object(a.useContext)(o.b),r=n.articles,l=n.setArticles,u=n.setLoading,s=n.loading,f=t||localStorage.getItem("keyword");Object(a.useEffect)((function(){i(l,u,{keyword:f}),localStorage.setItem("keyword",f)}),[f,l,u]);var m=Object(a.useState)(0),d=Object(c.a)(m,2),g=d[0],v=d[1],E=Object(a.useState)(!1),b=Object(c.a)(E,2),p=b[0],O=b[1];return Object(a.useEffect)((function(){0!==g&&i(l,O,{keyword:f,page:g})}),[g,f,l]),{articles:r,loading:s,loadingNextPage:p,setPages:v}}({keyword:t}),u=l.articles,s=l.loading,v=l.loadingNextPage,E=l.setPages,b=Object(a.useRef)(),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.distance,r=void 0===t?"100px":t,l=e.externalRef,i=Object(a.useState)(!1),o=Object(c.a)(i,2),u=o[0],s=o[1],f=Object(a.useRef)();return Object(a.useEffect)((function(){var e,t=l?l.current:f.current,a=function(e,t){e[0].isIntersecting?s(!0):s(!1)};return Promise.resolve("undefined"!==typeof IntersectionObserver?IntersectionObserver:n.e(4).then(n.t.bind(null,32,7))).then((function(){e=new IntersectionObserver(a,{rootMargin:r}),t&&e.observe(t)})),function(){return e&&e.disconnect()}})),{isNearScreen:u,fromRef:f}}({externalRef:s?null:b}).isNearScreen;Object(a.useEffect)((function(){console.log(p),p&&E((function(e){return e+1}))}),[p,E]);var O=u?"".concat(u.length," results for ").concat(decodeURI(t)):"";return s?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null,r.a.createElement("title",null,"Loading...")),r.a.createElement(d.a,null)):r.a.createElement(r.a.Fragment,null,s?r.a.createElement(d.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null,r.a.createElement("title",null,O," | Wikipedia Viewer"),r.a.createElement("meta",{name:"description",content:O}),r.a.createElement("meta",{name:"rating",content:"General"})),r.a.createElement(m.a,null),r.a.createElement("h2",null,"Search Results for: ",decodeURI(t),"..."),r.a.createElement(f,{articles:u}),r.a.createElement("div",{ref:b}),v&&r.a.createElement(d.a,null)))}}}]);
//# sourceMappingURL=3.f7cf86bd.chunk.js.map