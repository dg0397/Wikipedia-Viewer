(this["webpackJsonpwikipedia-viewer"]=this["webpackJsonpwikipedia-viewer"]||[]).push([[3],{21:function(e,t,n){},22:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var a=n(0),r=n.n(a),c=n(1),i=n(5);function o(e,t,n){var a=n.keyword,r=n.page,c=void 0===r?0:r,o=n.limit,l=void 0===o?10:o;t(!0),fetch("".concat(i.c).concat(i.a,"&gsrlimit=").concat(l,"&gsroffset=").concat(c*l,"&gsrsearch=").concat(a)).then((function(e){return e.json()})).then((function(n){var a=n.query.pages;console.log(Object.values(a));var r=Object.values(a).map((function(e){var t=e.pageid,n=e.pageimage,a=e.title,r=e.original,c=e.thumbnail,i=e.extract;return{pageid:t,pageimage:n,title:a,originalSource:(r||"").source,thumbnailSource:(c||"").source,extract:i}}));console.log("Fetching"),e(0===c?r:function(e){return e.concat(r)}),t(!1)}))}var l=n(8);n(21);var u=n(2);var s=r.a.memo((function(e){var t=e.title,n=e.extract,a=e.pageid;return r.a.createElement("div",{className:"Article"},r.a.createElement("h1",null,t),r.a.createElement("p",null,n),r.a.createElement(u.a,{to:"/article/".concat(a)},"See the Article"))}));n(22);function f(e){var t=e.articles;return r.a.createElement("div",{className:"ArticleList"},t.map((function(e){var t=e.title,n=e.extract,a=e.pageid;return r.a.createElement(s,{title:t,extract:n,pageid:a,key:a})})))}var g=n(7),d=n(9);function m(e){var t=e.params.keyword,i=function(e){var t=e.keyword,n=Object(a.useContext)(l.b),r=n.articles,i=n.setArticles,u=n.setLoading,s=n.loading,f=t||localStorage.getItem("keyword");Object(a.useEffect)((function(){o(i,u,{keyword:f}),localStorage.setItem("keyword",f)}),[f,i,u]);var g=Object(a.useState)(0),d=Object(c.a)(g,2),m=d[0],v=d[1],b=Object(a.useState)(!1),p=Object(c.a)(b,2),E=p[0],O=p[1];return Object(a.useEffect)((function(){0!==m&&o(i,O,{keyword:f,page:m})}),[m,f,i]),{articles:r,loading:s,loadingNextPage:E,setPages:v}}({keyword:t}),u=i.articles,s=i.loading,m=i.loadingNextPage,v=i.setPages,b=Object(a.useRef)(),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.distance,r=void 0===t?"100px":t,i=e.externalRef,o=Object(a.useState)(!1),l=Object(c.a)(o,2),u=l[0],s=l[1],f=Object(a.useRef)();return Object(a.useEffect)((function(){var e,t=i?i.current:f.current,a=function(e,t){e[0].isIntersecting?s(!0):s(!1)};return Promise.resolve("undefined"!==typeof IntersectionObserver?IntersectionObserver:n.e(5).then(n.t.bind(null,25,7))).then((function(){e=new IntersectionObserver(a,{rootMargin:r}),t&&e.observe(t)})),function(){return e&&e.disconnect()}})),{isNearScreen:u,fromRef:f}}({externalRef:s?null:b}).isNearScreen;return Object(a.useEffect)((function(){console.log(p),p&&v((function(e){return e+1}))}),[p,v]),r.a.createElement(r.a.Fragment,null,s?r.a.createElement(d.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null),r.a.createElement("h2",null,"Search Results for: ",decodeURI(t),"..."),r.a.createElement(f,{articles:u}),r.a.createElement("div",{ref:b}),m&&r.a.createElement(d.a,null)))}}}]);
//# sourceMappingURL=3.314d1f75.chunk.js.map